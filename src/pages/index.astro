---
import Navbar from '../components/Navbar.astro';
import Hero from '../components/Hero.astro';
import Platillo from '../components/Platillo.astro';

// 1. IMPORTAMOS LA FUNCI√ìN M√ÅGICA
import { getCollection } from 'astro:content';

// 2. PEDIMOS LOS PLATILLOS REALES DEL CMS
const todosLosPlatillos = await getCollection('platillos');

// 3. IMPORTAMOS LA INFO GENERAL (TEL√âFONO, FACEBOOK, ETC)
import info from '../data/info.json';
---

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Restaurante Demo</title>
  </head>
  <body>

    <Navbar />
    <Hero />

    <main>
      <h2 style="text-align: center; margin: 2rem 0;">Nuestro Men√∫</h2>
      
      <div class="grilla-menu">
        
        {todosLosPlatillos.map((platillo) => (
          <Platillo 
            titulo={platillo.data.title}
            precio={platillo.data.precio}
            descripcion={platillo.data.descripcion}
            imagen={platillo.data.imagen}
          />
        ))}

      </div>
    </main>

    <footer id="contacto">
      <h3>Vis√≠tanos</h3>
      <p>üìç {info.direccion}</p>
      <p>üïí {info.horario}</p>
      <p>üìû {info.telefono}</p>
      
      <div class="redes">
        <a href={info.facebook} target="_blank">Facebook</a>
        <a href={info.instagram} target="_blank">Instagram</a>
      </div>
    </footer>

  </body>
</html>

<style>
  body { margin: 0; font-family: sans-serif; background: #f9f9f9; }
  main { max-width: 1000px; margin: 0 auto; padding: 20px; }
  .grilla-menu {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem;
  }

  /* Estilos del Footer */
  footer {
    background: #222; 
    color: white; 
    padding: 2rem; 
    text-align: center; 
    margin-top: 3rem;
  }
  .redes a {
    color: #f39c12; 
    margin: 0 10px; 
    text-decoration: none;
    font-weight: bold;
  }
</style>